<div class="container-fluid">
  <app-page-title title="Add Factoring Comapny" [breadcrumbItems]="breadCrumbItems"></app-page-title>
  <div class="card">
    <div class="card-body">
      <form class="needs-validation" (ngSubmit)="validSubmit()" [formGroup]="companyForm">
        <div class="row">

          <div class="col-md-4 mb-3">

            <div class="mb-3">
              <label for="floatingemailInput">Company Name <span class="text-danger"> *</span></label>
              <input type="text" class="form-control" formControlName="name" placeholder="Enter Company Name"
                [ngClass]="{'is-invalid' :submit && form.name.errors ,'is-valid': !form.name.errors}">
              <div *ngIf="submit && form.name.errors" class="invalid-feedback">
                <span *ngIf="form.name.errors.required">Please provide a valid name.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="floatingemailInput">Primary Contact</label>
              <input type="text" class="form-control" formControlName="primaryConatct"
                placeholder="Enter Primary Contact" [ngClass]="{'is-invalid' :submit && form.primaryConatct.errors}">
            </div>

            <div class="mb-3">
              <label for="zip">Zip/Postal </label>
              <input type="zip" class="form-control" formControlName="zip" placeholder="Enter Zip/postal code"
                [ngClass]="{'is-invalid' :submit && form.zip.errors ,'is-valid': !form.zip.errors}">

              <div *ngIf="submit && form.zip.errors" class="invalid-feedback">
                <span *ngIf="form.zip.errors.required">Please provide a valid Postal Address.</span>
              </div>
            </div>



            <div class=" mb-3">
              <label for="tollFree">Toll Free </label>
              <input type="text" class="form-control" formControlName="tollFree" placeholder="Enter Toll Free"
                [ngClass]="{'is-invalid' :submit && form.tollFree.errors }">

              <div *ngIf="submit && form.tollFree.errors" class="invalid-feedback">
                <span *ngIf="form.tollFree.errors.required">Please provide a valid Toll Free.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="email">Email </label>
              <input type="email" class="form-control" formControlName="email" placeholder="Enter Email"
                [ngClass]="{'is-invalid' :submit && form.email.errors }">

              <div *ngIf="submit && form.email.errors" class="invalid-feedback">
                <span *ngIf="form.email.errors.required">Please provide a valid Email.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="remittanceEmail">Remittance Email </label>
              <input type="email" class="form-control" formControlName="remittanceEmail"
                placeholder="Enter Remittance Email" [ngClass]="{'is-invalid' :submit && form.remittanceEmail.errors }">

              <div *ngIf="submit && form.remittanceEmail.errors" class="invalid-feedback">
                <span *ngIf="form.remittanceEmail.errors.required">Please provide a valid Email.</span>
              </div>
            </div>


          </div>


          <div class="col-md-4 mb-3">

            <div class="mb-3">
              <label for="floatingemailInput">Address Line 1 <span class="text-danger"> *</span></label>
              <input type="email" class="form-control" formControlName="address_1" placeholder="Enter Address Line 1"
                [ngClass]="{'is-invalid' :submit && form.address_1.errors ,'is-valid': !form.address_1.errors}">

              <div *ngIf="submit && form.address_1.errors" class="invalid-feedback">
                <span *ngIf="form.address_1.errors.required">Please provide a valid Address.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="floatingemailInput">Address Line 2 <span class="text-danger"> *</span></label>
              <input type="email" class="form-control" formControlName="address_2" placeholder="Enter Address Line 2"
                [ngClass]="{'is-invalid' :submit && form.address_2.errors ,'is-valid': !form.address_2.errors}">

              <div *ngIf="submit && form.address_2.errors" class="invalid-feedback">
                <span *ngIf="form.address_2.errors.required">Please provide a valid Address.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="state">Country <span class="text-danger"> *</span></label>
              <ng-select formControlName="country" (ngModelChange)="onCountryChange($event)"
                placeholder="Select Country" [items]="countryList" bindLabel="name" bindValue="isoCode"
                [ngClass]="{'is-invalid' :submit && form.country.errors ,'is-valid': !form.country.errors}">
              </ng-select>

              <div *ngIf="submit && form.country.errors" class="invalid-feedback">
                <span *ngIf="form.country.errors.required">Please choose a valid Country.</span>
              </div>
            </div>

            <div class="mb-3">

              <label for="state">State/Province <span class="text-danger"> *</span></label>
              <ng-select formControlName="state" (ngModelChange)="onStateChange($event)" placeholder="Select State"
                [items]="stateList" bindLabel="name" bindValue="isoCode"
                [ngClass]="{'is-invalid' :submit && form.state.errors ,'is-valid': !form.state.errors}">
              </ng-select>

              <div *ngIf="submit && form.state.errors" class="invalid-feedback">
                <span *ngIf="form.state.errors.required">Please choose a valid State.</span>
              </div>
            </div>

            <div class="mb-3">

              <label for="state">City <span class="text-danger"> *</span></label>
              <ng-select formControlName="city" placeholder="Select City" [items]="cityList" bindLabel="name"
                bindValue="isoCode"
                [ngClass]="{'is-invalid' :submit && form.city.errors ,'is-valid': !form.city.errors}">
              </ng-select>

              <div *ngIf="submit && form.city.errors" class="invalid-feedback">
                <span *ngIf="form.city.errors.required">Please choose a valid Country.</span>
              </div>
            </div>
            <div class="row col-sm-12 mb-3">

              <div class="col-sm-6">
                <label for="telephone">Telephone Number <span class="text-danger"> *</span> </label>
                <input type="text" class="form-control" [prefix]="cDialCode" [showMaskTyped]="true"
                  [dropSpecialCharacters]="false" formControlName="telephone" placeholder="Enter Phone Number"
                  [ngClass]="{'is-invalid' :submit && form.telephone.errors ,'is-valid': !form.telephone.errors}"
                  mask="(000) 000-0000">

                <div *ngIf="submit && form.telephone.errors" class="invalid-feedback">
                  <span *ngIf="form.telephone.errors.required">Please provide a valid Phone Number.</span>
                </div>
              </div>

              <div class=" col-sm-6">
                <label for="ext">Ext.</label>
                <input type="text" class="form-control" formControlName="ext" placeholder="Enter Extension"
                  [ngClass]="{'is-invalid' :submit && form.ext.errors }">

                <div *ngIf="submit && form.ext.errors" class="invalid-feedback">
                  <span *ngIf="form.ext.errors.required">Please provide a valid Extension Number.</span>
                </div>
              </div>
            </div>
            <div class=" mb-3">
              <label for="fax">Fax </label>
              <input type="text" class="form-control" [prefix]="cDialCode" [showMaskTyped]="true"
                [dropSpecialCharacters]="false" formControlName="fax" placeholder="Enter Fax Number"
                [ngClass]="{'is-invalid' :submit && form.fax.errors}" mask="(000) 000-0000">

              <div *ngIf="submit && form.fax.errors" class="invalid-feedback">
                <span *ngIf="form.fax.errors.required">Please provide a valid Fax Number.</span>
              </div>
            </div>

          </div>

          <div class="col-md-4 mb-3">

            <div class="mb-3">

              <label for="currency">Currency</label>
              <ng-select formControlName="currency" placeholder="Select currency" [items]="currencyList"
                bindLabel="code" bindValue="code" [ngClass]="{'is-invalid' :submit && form.currency.errors }">
              </ng-select>

              <div *ngIf="submit && form.currency.errors" class="invalid-feedback">
                <span *ngIf="form.currency.errors.required">Please choose a valid currency.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="paymentTerms">Payment Terms</label>
              <ng-select formControlName="paymentTerms" placeholder="Select Terms" [items]="paymentTerms"
                bindLabel="name" bindValue="code"
                [ngClass]="{'is-invalid' :submit && form.paymentTerms.errors ,'is-valid': !form.paymentTerms.errors}">
              </ng-select>

              <div *ngIf="submit && form.paymentTerms.errors" class="invalid-feedback">
                <span *ngIf="form.paymentTerms.errors.required">Please choose a valid Payment Term.</span>
              </div>
            </div>

            <div class="mb-3">
              <label for="taxID">Tax ID/EIN </label>
              <input type="email" class="form-control" formControlName="taxID" placeholder="Enter Tax ID"
                [ngClass]="{'is-invalid' :submit && form.taxID.errors }">

              <div *ngIf="submit && form.taxID.errors" class="invalid-feedback">
                <span *ngIf="form.taxID.errors.required">Please provide a valid Tax ID.</span>
              </div>
            </div>

            <div class="">
              <label for="floatingemailInput">Note</label>
              <textarea class="form-control" formControlName="address_2" placeholder="Internal Note..."></textarea>
            </div>
          </div>
        </div>

        <div class="d-flex flex-wrap gap-2">
          <button type="submit" class="btn btn-primary waves-effect waves-light">
            Save
          </button>
          <button type="reset" class="btn btn-secondary waves-effect">
            Reset
          </button>
        </div>
      </form>
    </div>
  </div>
</div>