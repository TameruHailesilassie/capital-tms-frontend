<div class="container-fluid">
  <app-page-title title="Load Board" [breadcrumbItems]="breadCrumbItems"></app-page-title>

  <div class="card">
    <div class="card-body">
      <ul ngbNav #nav="ngbNav" [activeId]="1" class="nav-tabs nav-tabs-custom">

        <li [ngbNavItem]="1" *ngIf="isAdmin">
          <a ngbNavLink>All Loads</a>
          <ng-template ngbNavContent>
            <form>
              <div class="row">
                <div class="col-xl col-sm-6" *ngIf="isAdmin">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Office</label>
                    <ng-select [items]="officeList"></ng-select>
                  
                  </div>
                </div>
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Status</label>
                    <ng-select [items]="statusList"></ng-select>
                  
                  </div>
                </div>
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Pickup Date :</label>
                    <input class="form-control" placeholder="Choose Date" name="dp" [(ngModel)]="model" ngbDatepicker
                      #d="ngbDatepicker" (click)="d.toggle()" autocomplete="off">
                  </div>
                </div>
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Delivery Date :</label>
                    <input class="form-control" placeholder="Choose Date" name="dp" [(ngModel)]="model" ngbDatepicker
                      #d="ngbDatepicker" (click)="d.toggle()" autocomplete="off">
                  </div>
                </div>
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Customer</label>
                    <input class="form-control" placeholder="Type customer">
                  </div>
                </div>

                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Carrier</label>
                    <input class="form-control" placeholder="Type carrier">
                  </div>
                </div>
              </div>
            </form>
            <ng-template [ngTemplateOutlet]="TaskContent"></ng-template>
          </ng-template>
        </li>
        <li [ngbNavItem]="2">
          <a ngbNavLink>My Loads</a>
          <ng-template ngbNavContent>
            <form>
              <div class="row">
                
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Status</label>
                    <ng-select [items]="statusList"></ng-select>
                  
                  </div>
                </div>
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Pickup Date :</label>
                    <input class="form-control" placeholder="Choose Date" name="dp" [(ngModel)]="model" ngbDatepicker
                      #d="ngbDatepicker" (click)="d.toggle()" autocomplete="off">
                  </div>
                </div>
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Delivery Date :</label>
                    <input class="form-control" placeholder="Choose Date" name="dp" [(ngModel)]="model" ngbDatepicker
                      #d="ngbDatepicker" (click)="d.toggle()" autocomplete="off">
                  </div>
                </div>
                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Customer</label>
                    <input class="form-control" placeholder="Type customer">
                  </div>
                </div>

                <div class="col-xl col-sm-6">
                  <div class="mt-3 mb-0">
                    <label><i class="bx bx-filter-alt text-primary"></i> Carrier</label>
                    <input class="form-control" placeholder="Type carrier">
                  </div>
                </div>
              </div>
            </form>
            <ng-template [ngTemplateOutlet]="TaskContent"></ng-template>
          </ng-template>
        </li>
        <li [ngbNavItem]="3">
          <a ngbNavLink>Delivered</a>
          <ng-template ngbNavContent>
            <ng-template [ngTemplateOutlet]="TaskContent"></ng-template>
          </ng-template>
        </li>
      </ul>
      <div [ngbNavOutlet]="nav" class="p-3"></div>

    </div>
  </div>
</div>

<ng-template #TaskContent>

  <div class="row mb-md-2  mt-3">
    <div class="col-sm-12 col-md-6">
      <div class="dataTables_length" id="tickets-table_length"><label class="d-inline-flex align-items-center">Show
          <select name="tickets-table_length" aria-controls="tickets-table" name="pageSize"
            [(ngModel)]="service.pageSize" class="form-control form-control-sm mx-2">
            <option [ngValue]="10">10</option>
            <option [ngValue]="25">25</option>
            <option [ngValue]="50">50</option>
            <option [ngValue]="100">100</option>
          </select> entries</label></div>
    </div>
    <!-- Search -->
    <div class="col-sm-12 col-md-6">
      <div id="tickets-table_filter" class="dataTables_filter text-md-end"><label
          class="d-inline-flex align-items-center">Search:
          <input type="text" name="searchTerm" class="form-control form-control-sm ms-2" aria-controls="tickets-table"
            [(ngModel)]="service.searchTerm"></label></div>
    </div>
    <!-- End search -->
  </div>
  <!-- Table -->
  <div class="table-responsive">
    <table id="basic-datatable" class="table table-bordered dt-responsive nowrap datatables no-footer dtr-inline myt">
      <thead>
        <tr>

          <th sortable="status" (sort)="onSort($event)">Status</th>
          <th sortable="loadNumber" (sort)="onSort($event)">Load No.</th>
          <th sortable="customer" (sort)="onSort($event)">Customer</th>
          <th sortable="carrier" (sort)="onSort($event)">Carrier</th>
          <th sortable="pickup" (sort)="onSort($event)">Pickup</th>
          <th sortable="pickupDate" (sort)="onSort($event)">Pickup Date</th>
          <th sortable="delivery" (sort)="onSort($event)">Delivery</th>
          <th sortable="delDate" (sort)="onSort($event)">Del. Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody *ngFor="let table of tables$ | async;let i=index">
        <tr [ngStyle]="{padding:'0px', height:'5px'}">

          <td [ngStyle]="{padding:'0px'}">
            <loadstatus [statusId]="table.status"></loadstatus>
          </td>
          <td>
            <ngb-highlight [result]="table.loadNumber" [term]="service.searchTerm"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight [result]="table.customer" [term]="service.searchTerm"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight [result]="table.carrier" [term]="service.searchTerm"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight class="text-grey" [result]="table.pickup" [term]="service.searchTerm"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight [result]="table.pickupDate" [term]="service.searchTerm"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight [result]="table.delivery" [term]="service.searchTerm"></ngb-highlight>
          </td>
          <td>
            <ngb-highlight [result]="table.delDate" [term]="service.searchTerm"></ngb-highlight>
          </td>
          <td >
            <div ngbDropdown placement="bottom-left">
              <i class="mdi mdi-dots-horizontal dropdown-toggle" ngbDropdownToggle data-toggle="dropdown"
              aria-expanded="true"></i>
              <div class="dropdown-menu dropdown-menu-end" ngbDropdownMenu>
                <a class="dropdown-item" href="javascript: void(0);"><i class="bx bx-pen text-warning"></i> Edit</a>
                <a class="dropdown-item" href="javascript: void(0);"><i class="bx bx-list-check text-warning"></i> Details</a>
                <a class="dropdown-item" href="javascript: void(0);"><i class="bx bx-map text-warning"></i> Track Shipment</a>
                 <a class="dropdown-item" href="javascript: void(0);"><i class="bx bx-copy text-warning"></i> Duplicate</a>
              </div>
            </div>
          </td>
        </tr>


      </tbody>
    </table>
  </div>
  <!-- End table -->
  <div class="row justify-content-md-between align-items-md-center mt-2">
    <div class="col-sm-12 col-md-5">
      <div class="dataTables_info mb-2" id="tickets-table_info" role="status" aria-live="polite">Showing
        {{service.startIndex}} to
        {{service.endIndex}} of {{service.totalRecords}}
        entries
      </div>
    </div>
    <!-- Pagination -->
    <div class="col-sm-12 col-md-5">
      <div class="text-md-right float-md-end pagination-rounded">
        <ngb-pagination [collectionSize]="total$ | async" [(page)]="service.page" [pageSize]="service.pageSize">
        </ngb-pagination>
      </div>
    </div>
    <!-- End Pagination -->
  </div>

</ng-template>